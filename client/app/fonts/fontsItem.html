<!-- Inject all styles to use them directly -->
<div ng-repeat="variant in fontItem.variants" css-code variant="variant" font-item="fontItem" folder-prefix="folderPrefix" type="{styleTag:true}"></div>

<div cg-busy="{promise: loadingPromise, message: loadingMessage}">
  <div ng-hide="busy">
    <div class="row">
      <div class="col-sm-12">
        <h1 style="font-family:{{fontItem.variants[0].fontFamily}},'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:400; font-style:{{fontItem.variants[0].fontStyle}};">{{fontItem.family}}<br/><small>{{fontItem.category}}</small></h1>
      </div>
    </div>
    <div class="row">

      <div class="col-sm-6">
        <h5><ng-pluralize count="fontItem.variants.length"
                    when="{'0': 'no style',
                           'one': '{} style',
                           'other': '{} styles'}">
        </ng-pluralize>&nbsp;<small><span ng-repeat="variant in fontItem.variants">{{variant.id}}{{$last ? "" : ", "}}</span></small></h5>
        <h5><ng-pluralize count="fontItem.subsets.length"
                    when="{'0': 'no charsets',
                           'one': '{} charset',
                           'other': '{} charsets'}">
        </ng-pluralize>&nbsp;<small><span ng-repeat="subset in fontItem.subsets">{{subset}}{{$last ? "" : ", "}}</span></small></h5>
      </div>

      <div class="col-sm-6">
        <h5>Rank {{fontItem.popularity}}&nbsp;<small>in popularity of {{fonts.length}} fonts in total</small></h5>
        <h5>Last modified {{fontItem.lastModified}}&nbsp;<small>({{fontItem.version}})</small></h5>        
      </div>

    </div>

    <!-- Font preview -->
    <div> 

      <button id="fontPreviewToggle" class="btn btn-default btn-info btn-sm" ng-click="isCollapsed = !isCollapsed" ng-init="isCollapsed=true">{{isCollapsed === true ? "Show" : "Hide"}} style preview</button>

      <div collapse="isCollapsed">

        <hr>

        <div class="form-inline folderPrefixBar">Font Size:&nbsp;<div class="form-group">
          <input id="previewFontSizeInput" class="form-control input-sm" type="number" ng-model="fontSize" placeholder="16" ng-init="fontSize=16">&nbsp;px&nbsp;
        </div>
          <button class="btn btn-default btn-sm" ng-click="fontSize = fontSize - 1">-</button>
          <button class="btn btn-default btn-sm" ng-click="fontSize = fontSize + 1">+</button>
          <span class="text-muted small">Hint: sample text is editable.</span>
        </div>

        <div ng-repeat="variant in fontItem.variants">
          <span class="text-muted small">{{variant.id}}</span>
          <p style="font-family:{{variant.fontFamily}}; font-weight:{{variant.fontWeight}}; font-style:{{variant.fontStyle}}; font-size:{{fontSize > 0 ? fontSize : 16}}px;" contenteditable>The quick brown fox jumps over the lazy dog.</p>
        </div>

      </div>

    </div>

    <!-- styles set customization -->
    <div>
      <hr>
      <h4>1. Choose the styles you want:<br/><small>Select at least one style (default is <code>{{fontItem.defVariant}}</code>). </small></h4>
      <div class="variantsGroup">
        <label class="checkbox-inline" ng-repeat="(key,value) in variantsMap">
          <input type="checkbox" ng-model="variantsMap[key]" name="key" data-ng-disabled="checkVariantMinimalSelection(key)">{{key}}
        </label>
      </div>

    </div>

    <!-- character set customization -->
    <div>
      <hr>
      <h4>2. Choose the character sets you want:<br/><small>Select at least one character set (default is <code>{{fontItem.defSubset}}</code>). </small></h4>
      <div class="subsetGroup">
        <label class="checkbox-inline" ng-repeat="(key,value) in fontItem.subsetMap">
          <input type="checkbox" ng-model="fontItem.subsetMap[key]" name="key" ng-click="subsetSelect(); requiresReload=true;" data-ng-disabled="checkSubsetMinimalSelection(key)">{{key}}
        </label>
      </div>
    </div>

  </div>
  

  <div class="fontVariant" ng-hide="busy" cg-busy="{promise: subsetsChkbTimeoutP, message: customizationReloadMessage}"> <!-- FONT VARIANT BEGINS -->


  <!-- download button -->
    <div>
      <hr>
      <h4>3. Download font files for self-hosting:<br/><small>Archives are auto-generated and only include your selected character sets (but all styles and file formats).</small></h4>
      <a href="/api/fonts/{{fontItem.id}}?download=zip&amp;subsets={{downloadSubSetID}}" target="_blank" role="button" class="btn btn-primary btn-lg btn-block download-button"><i class="fa fa-download fa-lg"></i><br/>{{fontItem.id}}-{{fontItem.storeID}}.zip</a>
      <p><small>Archive includes .eot, .ttf, .svg, .woff and .woff2 files.<br/><strong>Fonts are copyright of their respective authors.</strong></small></p>
    </div>


    <!-- css snippets -->
    <div class="fontItemCSSWrap">

      <h4>4. Use this CSS snippet:<br/><small>Select <code>Best Support</code> if old browsers need to be supported. Customize the folder prefix so that it matches your folder structure.</small></h4>

      <div class="form-inline folderPrefixBar">Folder prefix:&nbsp;<div class="form-group">
        <input class="form-control input-sm" type="text" ng-model="folderPrefix" placeholder="no folder prefix" ng-init="folderPrefix='../fonts/'" value="../fonts/">
      </div></div>

      <tabset>
        <tab heading="Best Support">
          <div ng-click="selectText($event)">
            <div ng-repeat="variant in fontItem.variants | filter:variantFilter" css-code variant="variant" font-item="fontItem" folder-prefix="folderPrefix" type="{bestSupport:true}"></div>
          </div>
        </tab>

        <tab heading="Modern Browsers" select="modernOnlyActive();" deselect="modernOnlyDeactive();">
          <p>css-tricks.com: <a href="http://css-tricks.com/snippets/css/using-font-face/" target="blank">Things are shifting heavily toward WOFF</a><br/>caniuse.com: <a href="http://caniuse.com/#feat=woff" target="blank">Can I use woff? (compatibility information)</a></p>
          <div ng-click="selectText($event)">
            <div ng-repeat="variant in fontItem.variants | filter:variantFilter" css-code variant="variant" font-item="fontItem" folder-prefix="folderPrefix" type="{modernBrowsers:true}"></div>
          </div>
        </tab>

        <tab heading="Original links served by Google" class="pull-right">
          <div ng-repeat="variant in fontItem.variants | filter:variantFilter">
            <h5>{{fontItem.id}}-{{variant.id}} <small>{{fontItem.storeID}}</small></h5>
            <ul>
              <li>eot: <a href="{{variant.eot}}">{{variant.eot}}</a></li>
              <li>woff2: <a href="{{variant.woff2}}">{{variant.woff2}}</a></li>
              <li>woff: <a href="{{variant.woff}}">{{variant.woff}}</a></li>
              <li>ttf: <a href="{{variant.ttf}}">{{variant.ttf}}</a></li>
              <li>svg: <a href="{{variant.svg}}">{{variant.svg}}</a></li>
            </ul>
          </div>
        </tab>

      </tabset>
    </div>
    <hr>
    <h4>5. Delete unused files (optional)<br/><small>Based on your selected styles and CSS snippet, some files <span ng-if="modernFontsOnly">(and formats as you are using the <code>Modern Browsers</code> CSS snippet)</span> in your downloaded archive are not required! You can savely delete them with this <code>bash</code> command after unzipping.</small></h4>
    <pre ng-click="selectText($event)">rm <code ng-repeat="variant in fontItem.variants | filter:unusedFiles">{{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.eot {{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.woff {{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.woff2 {{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.ttf {{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.svg </code><code ng-repeat="variant in fontItem.variants | filter:variantFilter" ng-if="modernFontsOnly">{{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.eot {{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.ttf {{fontItem.id}}-{{fontItem.storeID}}-{{variant.id}}.svg </code></pre>
    <hr>
    <h4>6. You are now ready to self-host {{fontItem.family}}.<br/><small>If this service has actually been helpful for you, please <a href="https://github.com/majodev/google-webfonts-helper/" target="_blank">star it on GitHub</a>. If you've encountered serious problems file an issue <a href="https://github.com/majodev/google-webfonts-helper/issues">here</a>.</small></h4>
    <hr>
  </div> <!-- FONT VARIANT ENDS -->

  

</div>

<div class="apiError" ng-class="{'show': error === true}">
  <h2>API Error ({{errorStatus}})</h2>
  <pre>REQUEST CONFIG: {{errorConfig}}
REQUEST HEADERS: {{errorHeaders}}</pre>
</div>