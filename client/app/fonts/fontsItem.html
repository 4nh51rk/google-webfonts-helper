<!-- Inject all styles to use them directly -->
<div ng-repeat="variant in fontItem.variants" css-code variant="variant" font-item="fontItem" folder-prefix="folderPrefix" type="{styleTag:true}"></div>

<div cg-busy="{promise: loadingPromise, message: loadingMessage}">
  <div ng-hide="busy">
    <div class="row">
      <div class="col-sm-12">
        <h1 style="font-family:{{fontItem.variants[0].fontFamily}},'Helvetica Neue',Helvetica,Arial,sans-serif; font-weight:400; font-style:{{fontItem.variants[0].fontStyle}};">{{fontItem.family}}<br/><small>{{fontItem.category}}</small></h1>
      </div>
    </div>
    <div class="row">

      <div class="col-sm-6">
        <h5><ng-pluralize count="fontItem.variants.length"
                    when="{'0': 'no style',
                           'one': '{} style',
                           'other': '{} styles'}">
        </ng-pluralize>&nbsp;<small><span ng-repeat="variant in fontItem.variants">{{variant.id}}{{$last ? "" : ", "}}</span></small></h5>
        <h5><ng-pluralize count="fontItem.subsets.length"
                    when="{'0': 'no charsets',
                           'one': '{} charset',
                           'other': '{} charsets'}">
        </ng-pluralize>&nbsp;<small><span ng-repeat="subset in fontItem.subsets">{{subset}}{{$last ? "" : ", "}}</span></small></h5>
      </div>

      <div class="col-sm-6">
        <h5>Rank {{fontItem.popularity}}&nbsp;<small>in popularity of {{fonts.length}} fonts in total</small></h5>
        <h5>Last modified {{fontItem.lastModified}}&nbsp;<small>({{fontItem.version}})</small></h5>        
      </div>

    </div>

    <!-- character set customization -->
    <div>
      <hr>
      <h4>1. Select charsets:&nbsp;<small>(default is <code>{{fontItem.defSubset}}</code>)</small></h4>
      <div class="subsetGroup">
        <label class="checkbox-inline" ng-repeat="(key,value) in fontItem.subsetMap">
          <input type="checkbox" ng-model="fontItem.subsetMap[key]" name="key" ng-click="subsetSelect(); requiresReload=true;" data-ng-disabled="checkSubsetMinimalSelection(key)">{{key}}
        </label>
      </div>
    </div>

  </div>
  

  <div class="fontVariant" ng-hide="busy" cg-busy="{promise: subsetsChkbTimeoutP, message: customizationReloadMessage}"> <!-- FONT VARIANT BEGINS -->

      <!-- styles set customization -->
      <div>
      <hr>

      <h4>2. Select styles:&nbsp;<small>(default is <code>{{fontItem.defVariant}}</code>)</small></h4>

      <div id="fontStylePreviewChooser">
        <div ng-repeat="variant in fontItem.variants">
          <dl class="dl-horizontal variantList">
            <dt>
              <label class="checkbox-inline">
                <input type="checkbox" ng-model="variantsMap[variant.id]" name="variant.id" data-ng-disabled="checkVariantMinimalSelection(variant.id)" ng-click="variantSelect();"><span class="">{{variant.id}}</span>
              </label>
            </dt>
            <dd>
              <p style="font-family:{{variant.fontFamily}}; font-weight:{{variant.fontWeight}}; font-style:{{variant.fontStyle}}; font-size:{{fontSize > 0 ? fontSize : 16}}px;" contenteditable>The quick brown fox jumps over the lazy dog.</p>
            </dd>
          </dl>
        </div>
      </div>

      <div id="fontStyleControl" class="form-inline folderPrefixBar">
        <div class="row">
          <div class="col-xs-5 col-xs-offset-1">
            <div id="previewFontSizeInput" class="input-group">
              <span class="input-group-addon">Preview size</span>
              <input class="form-control input-sm" type="number" ng-model="fontSize" placeholder="16" ng-init="fontSize=16" aria-describedby="px-addon">
              <span class="input-group-addon" id="px-addon">px</span>
            </div>
          </div>
          <div class="col-xs-5">
            <div class="btn-group" role="group">
              <button class="btn btn-default btn-sm" ng-click="fontSize = fontSize - 1">-</button>
              <button class="btn btn-default btn-sm" ng-click="fontSize = fontSize + 1">+</button>
            </div>
            <span class="text-muted">&nbsp;Sample text editable.</span>
          </div>
        </div>
      </div>

    </div>

    <!-- css snippets -->
    <div class="fontItemCSSWrap">

      <h4>3. Copy CSS:&nbsp;<small>(select <code>Best Support</code> if old browsers need to be supported)</small></h4>

      <div class="form-inline folderPrefixBar">Folder prefix:&nbsp;<div class="form-group">
        <input class="form-control input-sm" type="text" ng-model="folderPrefix" placeholder="no folder prefix" ng-init="folderPrefix='../fonts/'" value="../fonts/">
      </div></div>

      <tabset>
        <tab heading="Best Support">
          <div ng-click="selectText($event)">
            <div ng-repeat="variant in fontItem.variants | filter:variantFilter" css-code variant="variant" font-item="fontItem" folder-prefix="folderPrefix" type="{bestSupport:true}"></div>
          </div>
        </tab>

        <tab heading="Modern Browsers" select="modernOnlyActive();" deselect="modernOnlyDeactive();">
          <div ng-click="selectText($event)">
            <div ng-repeat="variant in fontItem.variants | filter:variantFilter" css-code variant="variant" font-item="fontItem" folder-prefix="folderPrefix" type="{modernBrowsers:true}"></div>
          </div>
        </tab>

        <tab heading="Original links served by Google" class="pull-right">
          <div ng-repeat="variant in fontItem.variants | filter:variantFilter">
            <h5>{{fontItem.id}}-{{variant.id}} <small>{{fontItem.storeID}}</small></h5>
            <ul>
              <li>eot: <a href="{{variant.eot}}">{{variant.eot}}</a></li>
              <li>woff2: <a href="{{variant.woff2}}">{{variant.woff2}}</a></li>
              <li>woff: <a href="{{variant.woff}}">{{variant.woff}}</a></li>
              <li>ttf: <a href="{{variant.ttf}}">{{variant.ttf}}</a></li>
              <li>svg: <a href="{{variant.svg}}">{{variant.svg}}</a></li>
            </ul>
          </div>
        </tab>

      </tabset>
    </div>


    <!-- download button -->
    <div>
      <hr>
      <h4>4. Download files:&nbsp;<small>(auto-generated, files are matched against your previous selections)</small></h4>
      <a href="/api/fonts/{{fontItem.id}}?download=zip&amp;subsets={{downloadSubSetID}}&amp;variants={{variantDownloadQueryString}}{{modernFontsOnly === true ? '&formats=woff,woff2' : ''}}" target="_blank" role="button" class="btn btn-primary btn-lg btn-block download-button"><i class="fa fa-download fa-lg"></i><br/>{{fontItem.id}}-{{fontItem.version}}-{{fontItem.storeID}}.zip</a>
      <p><small>Your archive for {{fontItem.family}} includes styles <strong><code>[{{variantDownloadQueryString}}]</code></strong> in formats <strong><code>[{{modernFontsOnly === true ? '.woff,.woff2' : '.eot,.ttf,.svg, woff,.woff2'}}]</code></strong> for charsets <strong><code>[{{downloadSubSetID}}]</code></strong><br/><strong>Fonts are copyright of their respective authors.</strong></small></p>
    </div>

    <!-- final instructions -->
    <div>
      <hr>
      <h4>5. You are now ready to self-host {{fontItem.family}}.<br/><small>If this service has actually been helpful for you, please <a href="https://github.com/majodev/google-webfonts-helper/" target="_blank">star it on GitHub</a>. If you've encountered serious problems file an issue <a href="https://github.com/majodev/google-webfonts-helper/issues">here</a>.</small></h4>
      <hr>
    </div>


  </div> <!-- FONT VARIANT ENDS -->

  

</div>

<div class="apiError" ng-class="{'show': error === true}">
  <h2>API Error ({{errorStatus}})</h2>
  <pre>REQUEST CONFIG: {{errorConfig}}
REQUEST HEADERS: {{errorHeaders}}</pre>
</div>